'use client';
import { useState } from 'react';
import { createClient } from '@supabase/supabase-js';

const supabase = createClient(
  'https://iypezirwdlqpptjpeeyf.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml5cGV6aXJ3ZGxxcHB0anBlZXlmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg2Nzg3NzYsImV4cCI6MjA4NDI1NDc3Nn0.rfTN8fi9rd6o5rX-scAg9I1BbC-UjM8WoWEXDbrYJD4'
);

const COMPANIES = ['A-C Electric','AKE-Line','Apache Corp.','Armstrong Oil & Gas','ASRC Energy Services','CCI-Industrial','Chosen Construction','CINGSA','Coho Enterprises','Conam Construction','ConocoPhillips','Five Star Oilfield Services','Fox Energy Services','G.A. West','GBR Equipment','GLM Energy Services','Graham Industrial Coatings','Harvest Midstream','Hilcorp Alaska','MagTec Alaska','Merkes Builders','Nordic-Calista','Parker TRS','Peninsula Paving','Pollard Wireline','Ridgeline Oilfield Services','Santos','Summit Excavation','Tesoro Refinery','Yellowjacket','Other'];
const LOCATIONS = ['Kenai','CIO','Beaver Creek','Swanson River','Ninilchik','Nikiski','Other Kenai Asset','Deadhorse','Prudhoe Bay','Kuparuk','Alpine','Willow','ENI','PIKKA','Point Thompson','North Star Island','Endicott','Badami','Other North Slope'];
const SHIFTS = ['Day Shift','Night Shift','Swing Shift'];
const CRANE_TYPES = ['Mobile Hydraulic Crane','Rough Terrain Crane','All Terrain Crane','Crawler Crane','Boom Truck','Carry Deck Crane','Tower Crane','Overhead Bridge Crane','Gantry Crane','Jib Crane','Knuckle Boom','Other'];

const FLUID_ITEMS = [{id:'engineOil',label:'Engine Oil Level',options:['OK','Low - Added','Needs Attention']},{id:'hydraulicFluid',label:'Hydraulic Fluid Level',options:['OK','Low - Added','Needs Attention']},{id:'coolant',label:'Coolant Level',options:['OK','Low - Added','Needs Attention']},{id:'fuel',label:'Fuel Level',options:['Full','3/4','1/2','1/4','Low - Needs Fuel']},{id:'def',label:'DEF Level (if equipped)',options:['OK','Low - Added','N/A']},{id:'leaksCheck',label:'Leaks Check',options:['No Leaks','Minor Leak','Major Leak - DNO']},{id:'beltsHoses',label:'Belts and Hoses',options:['OK','Worn','Damaged - DNO']},{id:'airFilter',label:'Air Filter',options:['OK','Service Soon','Restricted']},{id:'battery',label:'Battery Condition',options:['OK','Corrosion - Clean','Weak']}];
const BOOM_ITEMS = [{id:'boomCondition',label:'Boom Condition',options:['OK','Minor Damage','Cracked/Bent - DNO']},{id:'boomPins',label:'Boom Pins & Keepers',options:['OK','Worn','Missing/Damaged - DNO']},{id:'boomSections',label:'Boom Sections (Extend/Retract)',options:['OK','Sluggish','Not Working - DNO']},{id:'jibCondition',label:'Jib Condition (if equipped)',options:['OK','Damaged','N/A']},{id:'jibPins',label:'Jib Pins & Connections',options:['OK','Worn','N/A']}];
const RIGGING_ITEMS = [{id:'wireRopeCondition',label:'Wire Rope Condition',options:['OK','Worn - Monitor','Damaged - DNO']},{id:'wireRopeTerminations',label:'Wire Rope Terminations',options:['OK','Worn','Damaged - DNO']},{id:'sheavesCondition',label:'Sheaves Condition',options:['OK','Worn','Damaged - DNO']},{id:'hookCondition',label:'Hook Condition',options:['OK','Worn','Cracked/Bent - DNO']},{id:'hookLatch',label:'Hook Safety Latch',options:['OK','Bent','Missing/Broken - DNO']},{id:'hookBlock',label:'Hook Block',options:['OK','Damaged']},{id:'loadBlockSwivel',label:'Load Block Swivel',options:['OK - Free','Stiff','Seized - DNO']}];
const SAFETY_ITEMS = [{id:'antiTwoBlock',label:'Anti Two-Block Device',options:['OK - Tested','Not Working - DNO','N/A']},{id:'lmiRcl',label:'LMI/RCL Function',options:['OK - Tested','Not Working - DNO','N/A']},{id:'loadChartsAvailable',label:'Load Charts Available',options:['Yes','No - DNO']}];
const OUTRIGGER_ITEMS = [{id:'outriggersCondition',label:'Outriggers Condition',options:['OK','Damaged','Not Working - DNO','N/A']},{id:'outriggerPads',label:'Outrigger Pads',options:['OK','Damaged','Missing','N/A']}];
const BRAKE_ITEMS = [{id:'swingMechanism',label:'Swing Mechanism',options:['OK','Noisy','Not Working - DNO']},{id:'swingBrake',label:'Swing Brake',options:['OK','Weak','Not Holding - DNO']},{id:'hoistBrake',label:'Hoist Brake',options:['OK','Weak','Not Holding - DNO']},{id:'boomHoistBrake',label:'Boom Hoist Brake',options:['OK','Weak','Not Holding - DNO']},{id:'travelBrakes',label:'Travel Brakes',options:['OK','Weak','Not Working - DNO','N/A']},{id:'counterweightsSecure',label:'Counterweights Secure',options:['OK','Loose - DNO','N/A']}];
const CAB_ITEMS = [{id:'cabWindows',label:'Cab Windows',options:['OK','Cracked','Broken - DNO']},{id:'mirrors',label:'Mirrors',options:['OK','Damaged/Missing']},{id:'controlsResponse',label:'Controls Response',options:['OK','Sluggish','Not Responding - DNO']},{id:'gaugesFunction',label:'Gauges Function',options:['OK','Not Working']},{id:'warningLights',label:'Warning Lights',options:['OK','Warning Active']},{id:'horn',label:'Horn',options:['OK','Not Working']},{id:'backupAlarm',label:'Backup Alarm',options:['OK','Not Working - DNO']},{id:'headlights',label:'Headlights',options:['OK','Not Working']},{id:'workLights',label:'Work Lights',options:['OK','Not Working']},{id:'beaconStrobe',label:'Beacon/Strobe',options:['OK','Not Working']},{id:'fireExtinguisher',label:'Fire Extinguisher',options:['OK - Charged','Needs Recharge','Missing - DNO']}];
const DOC_ITEMS = [{id:'operatorManual',label:'Operator Manual Present',options:['Yes','No']},{id:'loadChartsPosted',label:'Load Charts Posted',options:['Yes','No - DNO']},{id:'handSignalsPosted',label:'Hand Signals Posted',options:['Yes','No']},{id:'decalsLegible',label:'Safety Decals Legible',options:['Yes','Some Worn','Not Legible']}];

function getItemStyle(value){
  if(!value)return{};
  if(value.includes('OK')||value.includes('No Leaks')||value==='Full'||value==='Yes'||value==='3/4'||value==='1/2'||value.includes('Tested')||value.includes('Free'))return{borderColor:'#16a34a',background:'#f0fdf4'};
  if(value.includes('DNO')||value.includes('Cracked')||value.includes('Bent')||value.includes('Missing')||value.includes('Broken')||value.includes('Seized')||value.includes('Loose')||value.includes('Unstable')||value.includes('Severe'))return{borderColor:'#dc2626',background:'#fef2f2'};
  if(value==='N/A')return{borderColor:'#6b7280',background:'#f9fafb'};
  return{borderColor:'#eab308',background:'#fefce8'};
}

export default function CraneInspection(){
  const [isSubmitting,setIsSubmitting]=useState(false);
  const [submitted,setSubmitted]=useState(false);
  const [formData,setFormData]=useState({
    operatorName:'',date:new Date().toISOString().split('T')[0],shift:'',location:'',company:'',craneNumber:'',craneType:'',make:'',model:'',serialNumber:'',capacity:'',hourMeter:'',lastAnnualInspection:'',
    engineOil:'',hydraulicFluid:'',coolant:'',fuel:'',def:'',leaksCheck:'',beltsHoses:'',airFilter:'',battery:'',
    boomCondition:'',boomPins:'',boomSections:'',jibCondition:'',jibPins:'',
    wireRopeCondition:'',wireRopeTerminations:'',sheavesCondition:'',hookCondition:'',hookLatch:'',hookBlock:'',loadBlockSwivel:'',
    antiTwoBlock:'',lmiRcl:'',loadChartsAvailable:'',
    outriggersCondition:'',outriggerPads:'',
    swingMechanism:'',swingBrake:'',hoistBrake:'',boomHoistBrake:'',travelBrakes:'',counterweightsSecure:'',
    cabWindows:'',mirrors:'',controlsResponse:'',gaugesFunction:'',warningLights:'',horn:'',backupAlarm:'',headlights:'',workLights:'',beaconStrobe:'',fireExtinguisher:'',
    operatorManual:'',loadChartsPosted:'',handSignalsPosted:'',decalsLegible:'',
    groundConditions:'',weatherConditions:'',windSpeed:'',temperature:'',
    overallCondition:'',inspectionResult:'',defectsFound:'',defectDescription:'',comments:''
  });

  const handleChange=(e)=>{const{name,value}=e.target;setFormData(p=>({...p,[name]:value}));};

  const handleSubmit=async(e)=>{e.preventDefault();setIsSubmitting(true);
    try{
      const{error}=await supabase.from('crane_inspections').insert([{
        operator_name:formData.operatorName,date:formData.date,shift:formData.shift,location:formData.location,company:formData.company,crane_number:formData.craneNumber,crane_type:formData.craneType,make:formData.make,model:formData.model,serial_number:formData.serialNumber,capacity:formData.capacity,hour_meter:formData.hourMeter,last_annual_inspection:formData.lastAnnualInspection||null,
        engine_oil:formData.engineOil,hydraulic_fluid:formData.hydraulicFluid,coolant:formData.coolant,fuel:formData.fuel,def:formData.def,leaks_check:formData.leaksCheck,belts_hoses:formData.beltsHoses,air_filter:formData.airFilter,battery:formData.battery,
        boom_condition:formData.boomCondition,boom_pins:formData.boomPins,boom_sections:formData.boomSections,jib_condition:formData.jibCondition,jib_pins:formData.jibPins,
        wire_rope_condition:formData.wireRopeCondition,wire_rope_terminations:formData.wireRopeTerminations,sheaves_condition:formData.sheavesCondition,hook_condition:formData.hookCondition,hook_latch:formData.hookLatch,hook_block:formData.hookBlock,load_block_swivel:formData.loadBlockSwivel,
        anti_two_block:formData.antiTwoBlock,lmi_rcl:formData.lmiRcl,load_charts_available:formData.loadChartsAvailable,
        outriggers_condition:formData.outriggersCondition,outrigger_pads:formData.outriggerPads,
        swing_mechanism:formData.swingMechanism,swing_brake:formData.swingBrake,hoist_brake:formData.hoistBrake,boom_hoist_brake:formData.boomHoistBrake,travel_brakes:formData.travelBrakes,counterweights_secure:formData.counterweightsSecure,
        cab_windows:formData.cabWindows,mirrors:formData.mirrors,controls_response:formData.controlsResponse,gauges_function:formData.gaugesFunction,warning_lights:formData.warningLights,horn:formData.horn,backup_alarm:formData.backupAlarm,headlights:formData.headlights,work_lights:formData.workLights,beacon_strobe:formData.beaconStrobe,fire_extinguisher:formData.fireExtinguisher,
        operator_manual:formData.operatorManual,load_charts_posted:formData.loadChartsPosted,hand_signals_posted:formData.handSignalsPosted,decals_legible:formData.decalsLegible,
        ground_conditions:formData.groundConditions,weather_conditions:formData.weatherConditions,wind_speed:formData.windSpeed,temperature:formData.temperature,
        overall_condition:formData.overallCondition,inspection_result:formData.inspectionResult,defects_found:formData.defectsFound,defect_description:formData.defectDescription,comments:formData.comments
      }]);
      if(error)throw error;
      setSubmitted(true);
    }catch(e){console.error(e);alert('Error: '+e.message);}finally{setIsSubmitting(false);}
  };

  const resetForm=()=>{setFormData({operatorName:'',date:new Date().toISOString().split('T')[0],shift:'',location:'',company:'',craneNumber:'',craneType:'',make:'',model:'',serialNumber:'',capacity:'',hourMeter:'',lastAnnualInspection:'',engineOil:'',hydraulicFluid:'',coolant:'',fuel:'',def:'',leaksCheck:'',beltsHoses:'',airFilter:'',battery:'',boomCondition:'',boomPins:'',boomSections:'',jibCondition:'',jibPins:'',wireRopeCondition:'',wireRopeTerminations:'',sheavesCondition:'',hookCondition:'',hookLatch:'',hookBlock:'',loadBlockSwivel:'',antiTwoBlock:'',lmiRcl:'',loadChartsAvailable:'',outriggersCondition:'',outriggerPads:'',swingMechanism:'',swingBrake:'',hoistBrake:'',boomHoistBrake:'',travelBrakes:'',counterweightsSecure:'',cabWindows:'',mirrors:'',controlsResponse:'',gaugesFunction:'',warningLights:'',horn:'',backupAlarm:'',headlights:'',workLights:'',beaconStrobe:'',fireExtinguisher:'',operatorManual:'',loadChartsPosted:'',handSignalsPosted:'',decalsLegible:'',groundConditions:'',weatherConditions:'',windSpeed:'',temperature:'',overallCondition:'',inspectionResult:'',defectsFound:'',defectDescription:'',comments:''});setSubmitted(false);};

  const s={container:{minHeight:'100vh',background:'linear-gradient(135deg, #1e3a8a 0%, #b91c1c 100%)',padding:'20px'},formContainer:{maxWidth:'900px',margin:'0 auto',background:'white',borderRadius:'12px',boxShadow:'0 4px 6px rgba(0,0,0,0.1)',overflow:'hidden'},header:{background:'linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%)',color:'white',padding:'25px',textAlign:'center'},content:{padding:'25px'},section:{marginBottom:'15px',border:'1px solid #e5e7eb',borderRadius:'10px',overflow:'hidden'},sectionHeader:{color:'white',padding:'10px 15px',fontWeight:'600',fontSize:'14px'},sectionBlue:{background:'linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%)'},sectionCyan:{background:'linear-gradient(135deg, #0891b2 0%, #0e7490 100%)'},sectionOrange:{background:'linear-gradient(135deg, #ea580c 0%, #c2410c 100%)'},sectionRed:{background:'linear-gradient(135deg, #dc2626 0%, #991b1b 100%)'},sectionPurple:{background:'linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)'},sectionGreen:{background:'linear-gradient(135deg, #059669 0%, #047857 100%)'},sectionYellow:{background:'linear-gradient(135deg, #eab308 0%, #ca8a04 100%)'},sectionIndigo:{background:'linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)'},sectionTeal:{background:'linear-gradient(135deg, #0d9488 0%, #0f766e 100%)'},sectionAmber:{background:'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)'},sectionBody:{padding:'12px',background:'#f8fafc'},formRow:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(180px, 1fr))',gap:'12px',marginBottom:'12px'},formGroup:{display:'flex',flexDirection:'column'},label:{fontWeight:'600',color:'#374151',marginBottom:'4px',fontSize:'13px'},required:{color:'#b91c1c'},input:{padding:'8px 10px',border:'2px solid #d1d5db',borderRadius:'6px',fontSize:'14px'},select:{padding:'8px 10px',border:'2px solid #d1d5db',borderRadius:'6px',fontSize:'14px',background:'white'},textarea:{padding:'8px 10px',border:'2px solid #d1d5db',borderRadius:'6px',fontSize:'14px',minHeight:'60px',resize:'vertical'},criticalBox:{background:'#fee2e2',borderLeft:'4px solid #dc2626',padding:'10px',marginBottom:'12px',fontSize:'13px',borderRadius:'0 6px 6px 0',color:'#991b1b'},inspectionGrid:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(280px, 1fr))',gap:'10px'},inspectionItem:{display:'flex',alignItems:'center',justifyContent:'space-between',padding:'10px 12px',background:'white',border:'2px solid #e5e7eb',borderRadius:'8px',gap:'10px'},inspectionSelect:{padding:'6px 10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'13px',minWidth:'140px'},radioGroup:{display:'flex',gap:'15px',flexWrap:'wrap'},radioItem:{display:'flex',alignItems:'center',gap:'8px',padding:'10px 15px',background:'white',border:'2px solid #e5e7eb',borderRadius:'8px',cursor:'pointer',fontSize:'13px',transition:'all 0.2s'},radioItemPass:{borderColor:'#16a34a',background:'#dcfce7'},radioItemFail:{borderColor:'#dc2626',background:'#fee2e2'},submitBtn:{width:'100%',padding:'14px',background:'linear-gradient(135deg, #1e3a8a 0%, #b91c1c 100%)',color:'white',border:'none',borderRadius:'10px',fontSize:'16px',fontWeight:'600',cursor:'pointer',marginTop:'15px'},successMessage:{background:'linear-gradient(135deg, #059669 0%, #047857 100%)',color:'white',padding:'30px',borderRadius:'12px',textAlign:'center',margin:'20px 0'}};

  const InspectionSection=({title,items,color,critical})=>(<div style={s.section}><div style={{...s.sectionHeader,...color}}>{title}</div><div style={s.sectionBody}>{critical&&<div style={s.criticalBox}>üö® CRITICAL: {critical}</div>}<div style={s.inspectionGrid}>{items.map(item=><div key={item.id} style={{...s.inspectionItem,...getItemStyle(formData[item.id])}}><span style={{fontSize:'13px',color:'#374151',flex:1}}>{item.label}</span><select name={item.id} value={formData[item.id]} onChange={handleChange} style={s.inspectionSelect}><option value="">Select...</option>{item.options.map(o=><option key={o} value={o}>{o}</option>)}</select></div>)}</div></div></div>);

  if(submitted){return(<div style={s.container}><div style={{maxWidth:'600px',margin:'0 auto',paddingTop:'50px'}}><div style={s.successMessage}><div style={{fontSize:'48px',marginBottom:'15px'}}>‚úÖ</div><h2 style={{margin:'0 0 10px'}}>Inspection Submitted!</h2><p style={{marginBottom:'20px'}}>Pre-Shift Crane Inspection recorded successfully.</p><div style={{display:'flex',gap:'10px',justifyContent:'center',flexWrap:'wrap'}}><button onClick={resetForm} style={{...s.submitBtn,maxWidth:'200px',background:'white',color:'#059669'}}>Submit Another</button><a href="/" style={{...s.submitBtn,maxWidth:'200px',background:'#6b7280',textDecoration:'none',textAlign:'center'}}>Back to Portal</a></div></div></div></div>);}

  return(<div style={s.container}><div style={s.formContainer}>
    <div style={s.header}><a href="/" style={{color:'white',textDecoration:'none',fontSize:'14px'}}>‚Üê Back to Portal</a><div style={{background:'rgba(255,255,255,0.95)',borderRadius:'12px',padding:'15px',width:'fit-content',margin:'15px auto',boxShadow:'0 4px 15px rgba(0,0,0,0.2)'}}><img src="/Logo.png" alt="SLP Alaska" style={{maxWidth:'180px',height:'auto'}}/></div><div style={{display:'inline-block',background:'white',color:'#f59e0b',padding:'5px 14px',borderRadius:'20px',fontWeight:'700',fontSize:'12px',marginBottom:'12px',border:'3px solid white'}}>‚ö†Ô∏è OSHA 1926.1412 | ASME B30</div><h1 style={{margin:'0 0 5px',fontSize:'20px'}}>üèóÔ∏è Pre-Shift Crane Inspection</h1><p style={{opacity:0.9,fontSize:'13px'}}>Mobile Cranes, Boom Trucks, Overhead Cranes</p></div>
    
    <div style={s.content}><form onSubmit={handleSubmit}>
      {/* CRANE & OPERATOR INFO */}
      <div style={s.section}><div style={{...s.sectionHeader,...s.sectionBlue}}>üìã Crane & Operator Information</div><div style={s.sectionBody}>
        <div style={s.formRow}><div style={s.formGroup}><label style={s.label}>Operator Name <span style={s.required}>*</span></label><input type="text" name="operatorName" value={formData.operatorName} onChange={handleChange} required style={s.input}/></div><div style={s.formGroup}><label style={s.label}>Date <span style={s.required}>*</span></label><input type="date" name="date" value={formData.date} onChange={handleChange} required style={s.input}/></div><div style={s.formGroup}><label style={s.label}>Shift <span style={s.required}>*</span></label><select name="shift" value={formData.shift} onChange={handleChange} required style={s.select}><option value="">Select...</option>{SHIFTS.map(sh=><option key={sh} value={sh}>{sh}</option>)}</select></div></div>
        <div style={s.formRow}><div style={s.formGroup}><label style={s.label}>Company <span style={s.required}>*</span></label><select name="company" value={formData.company} onChange={handleChange} required style={s.select}><option value="">Select...</option>{COMPANIES.map(c=><option key={c} value={c}>{c}</option>)}</select></div><div style={s.formGroup}><label style={s.label}>Location <span style={s.required}>*</span></label><select name="location" value={formData.location} onChange={handleChange} required style={s.select}><option value="">Select...</option>{LOCATIONS.map(l=><option key={l} value={l}>{l}</option>)}</select></div><div style={s.formGroup}><label style={s.label}>Crane Number <span style={s.required}>*</span></label><input type="text" name="craneNumber" value={formData.craneNumber} onChange={handleChange} required placeholder="e.g., CR-001" style={s.input}/></div></div>
        <div style={s.formRow}><div style={s.formGroup}><label style={s.label}>Crane Type <span style={s.required}>*</span></label><select name="craneType" value={formData.craneType} onChange={handleChange} required style={s.select}><option value="">Select...</option>{CRANE_TYPES.map(t=><option key={t} value={t}>{t}</option>)}</select></div><div style={s.formGroup}><label style={s.label}>Make</label><input type="text" name="make" value={formData.make} onChange={handleChange} placeholder="e.g., Liebherr, Grove" style={s.input}/></div><div style={s.formGroup}><label style={s.label}>Model</label><input type="text" name="model" value={formData.model} onChange={handleChange} placeholder="e.g., LTM 1100" style={s.input}/></div></div>
        <div style={s.formRow}><div style={s.formGroup}><label style={s.label}>Serial Number</label><input type="text" name="serialNumber" value={formData.serialNumber} onChange={handleChange} style={s.input}/></div><div style={s.formGroup}><label style={s.label}>Capacity (tons)</label><input type="text" name="capacity" value={formData.capacity} onChange={handleChange} placeholder="e.g., 100" style={s.input}/></div><div style={s.formGroup}><label style={s.label}>Hour Meter</label><input type="text" name="hourMeter" value={formData.hourMeter} onChange={handleChange} placeholder="e.g., 5432" style={s.input}/></div><div style={s.formGroup}><label style={s.label}>Last Annual Inspection</label><input type="date" name="lastAnnualInspection" value={formData.lastAnnualInspection} onChange={handleChange} style={s.input}/></div></div>
      </div></div>
      
      {/* FLUID LEVELS & ENGINE */}
      <InspectionSection title="üõ¢Ô∏è Fluid Levels & Engine" items={FLUID_ITEMS} color={s.sectionCyan}/>
      
      {/* BOOM & STRUCTURE */}
      <InspectionSection title="üèóÔ∏è Boom & Structure" items={BOOM_ITEMS} color={s.sectionOrange} critical="Any cracks, deformation, or damage to structural components = DO NOT OPERATE"/>
      
      {/* WIRE ROPE & RIGGING */}
      <InspectionSection title="ü™ù Wire Rope & Rigging" items={RIGGING_ITEMS} color={s.sectionRed} critical="Wire rope with broken wires, kinks, bird caging, or corrosion = DO NOT OPERATE"/>
      
      {/* SAFETY DEVICES */}
      <InspectionSection title="üõ°Ô∏è Safety Devices" items={SAFETY_ITEMS} color={s.sectionPurple} critical="Non-functional safety devices = DO NOT OPERATE"/>
      
      {/* OUTRIGGERS */}
      <InspectionSection title="ü¶ø Outriggers & Stabilizers" items={OUTRIGGER_ITEMS} color={s.sectionGreen}/>
      
      {/* BRAKES & CONTROLS */}
      <InspectionSection title="üîÑ Brakes & Controls" items={BRAKE_ITEMS} color={s.sectionYellow}/>
      
      {/* CAB, LIGHTS & ALARMS */}
      <InspectionSection title="üöó Cab, Lights & Alarms" items={CAB_ITEMS} color={s.sectionIndigo}/>
      
      {/* DOCUMENTATION */}
      <InspectionSection title="üìÑ Documentation & Signage" items={DOC_ITEMS} color={s.sectionTeal}/>
      
      {/* SITE CONDITIONS */}
      <div style={s.section}><div style={{...s.sectionHeader,...s.sectionAmber}}>üå§Ô∏è Site & Weather Conditions</div><div style={s.sectionBody}>
        <div style={s.formRow}><div style={s.formGroup}><label style={s.label}>Ground Conditions</label><select name="groundConditions" value={formData.groundConditions} onChange={handleChange} style={s.select}><option value="">Select...</option><option value="Firm - Stable">Firm - Stable</option><option value="Soft - Use Mats">Soft - Use Mats</option><option value="Frozen">Frozen</option><option value="Muddy">Muddy</option><option value="Sloped">Sloped</option><option value="Unstable - DNO">Unstable - DNO</option></select></div><div style={s.formGroup}><label style={s.label}>Weather Conditions</label><select name="weatherConditions" value={formData.weatherConditions} onChange={handleChange} style={s.select}><option value="">Select...</option><option value="Clear">Clear</option><option value="Cloudy">Cloudy</option><option value="Light Rain">Light Rain</option><option value="Heavy Rain - Caution">Heavy Rain - Caution</option><option value="Snow">Snow</option><option value="Fog - Limited Visibility">Fog - Limited Visibility</option><option value="Severe - DNO">Severe - DNO</option></select></div><div style={s.formGroup}><label style={s.label}>Wind Speed (mph)</label><input type="text" name="windSpeed" value={formData.windSpeed} onChange={handleChange} placeholder="e.g., 15" style={s.input}/></div><div style={s.formGroup}><label style={s.label}>Temperature (¬∞F)</label><input type="text" name="temperature" value={formData.temperature} onChange={handleChange} placeholder="e.g., 45" style={s.input}/></div></div>
      </div></div>
      
      {/* OVERALL & RESULT */}
      <div style={s.section}><div style={{...s.sectionHeader,...s.sectionGreen}}>‚úÖ Overall Condition & Inspection Result</div><div style={s.sectionBody}>
        <div style={s.formRow}><div style={s.formGroup}><label style={s.label}>Overall Crane Condition <span style={s.required}>*</span></label><select name="overallCondition" value={formData.overallCondition} onChange={handleChange} required style={s.select}><option value="">Select...</option><option value="Good">Good - No Issues</option><option value="Fair">Fair - Minor Issues Noted</option><option value="Poor">Poor - Needs Immediate Attention</option></select></div></div>
        <div style={s.formGroup}><label style={s.label}>Inspection Result <span style={s.required}>*</span></label><div style={s.radioGroup}><label style={{...s.radioItem,...(formData.inspectionResult==='Pass - Safe to Operate'?s.radioItemPass:{})}}><input type="radio" name="inspectionResult" value="Pass - Safe to Operate" checked={formData.inspectionResult==='Pass - Safe to Operate'} onChange={handleChange} required/><span>‚úÖ Pass - Safe to Operate</span></label><label style={{...s.radioItem,...(formData.inspectionResult==='Fail - Do Not Operate'?s.radioItemFail:{})}}><input type="radio" name="inspectionResult" value="Fail - Do Not Operate" checked={formData.inspectionResult==='Fail - Do Not Operate'} onChange={handleChange}/><span>‚ùå Fail - Do Not Operate</span></label></div></div>
        <div style={{...s.formGroup,marginTop:'12px'}}><label style={s.label}>Defects Found? <span style={s.required}>*</span></label><div style={s.radioGroup}><label style={s.radioItem}><input type="radio" name="defectsFound" value="Yes" checked={formData.defectsFound==='Yes'} onChange={handleChange} required/><span>Yes</span></label><label style={s.radioItem}><input type="radio" name="defectsFound" value="No" checked={formData.defectsFound==='No'} onChange={handleChange}/><span>No</span></label></div></div>
        {formData.defectsFound==='Yes'&&<div style={{...s.formGroup,marginTop:'12px'}}><label style={s.label}>Defect Description <span style={s.required}>*</span></label><textarea name="defectDescription" value={formData.defectDescription} onChange={handleChange} required placeholder="Describe all defects found..." style={s.textarea}/></div>}
        <div style={{...s.formGroup,marginTop:'12px'}}><label style={s.label}>Additional Comments</label><textarea name="comments" value={formData.comments} onChange={handleChange} placeholder="Any additional notes or observations..." style={s.textarea}/></div>
      </div></div>
      
      <button type="submit" disabled={isSubmitting} style={{...s.submitBtn,opacity:isSubmitting?0.5:1}}>{isSubmitting?'Submitting...':'Submit Inspection'}</button>
    </form></div>
    
    <div style={{textAlign:'center',padding:'20px',background:'linear-gradient(to bottom, #f8fafc, #ffffff)',color:'#64748b',fontSize:'11px',borderTop:'1px solid #e2e8f0'}}><span style={{color:'#1e3a5f',fontWeight:'500'}}>AnthroSafe‚Ñ¢ Powered by Field Driven Data‚Ñ¢</span><span style={{color:'#94a3b8',margin:'0 8px'}}>|</span><span style={{color:'#475569'}}>¬© 2025 SLP Alaska</span></div>
  </div></div>);
}
